<!DOCTYPE html>
<html>
 <head>
  <title>Admin Login</title>
  <link
   rel="stylesheet"
   href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
  />
  <style>
   body {
    background: #f8f9fa;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
   }
   .login-card {
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    background: #fff;
    width: 100%;
    max-width: 400px;
   }
   .login-card h2 {
    font-weight: 600;
   }
  </style>
 </head>
 <body>
  <div class="login-card">
   <h2 class="mb-4 text-center">Admin Login</h2>
   <form id="loginForm">
    <div class="mb-3">
     <input
      type="text"
      name="username"
      class="form-control"
      placeholder="Username"
      required
     />
    </div>
    <div class="mb-3">
     <input
      type="password"
      name="password"
      class="form-control"
      placeholder="Password"
      required
     />
    </div>
    <button type="submit" class="btn btn-primary w-100">Login</button>
   </form>
  </div>

  <script>
   const form = document.getElementById("loginForm");

   form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const username = form.username.value;
    const password = form.password.value;

    try {
     const res = await fetch("https://backend-mamaida.onrender.com/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password }),
      credentials: "include", // âœ… send session cookie
     });

     const data = await res.json();

     if (data.success) {
      // Redirect to dashboard on successful login
      window.location.href = "https://backend-mamaida.onrender.com/dashboard";
     } else {
      alert(data.message || "Login failed");
     }
    } catch (err) {
     console.error("Login error:", err);
     alert("Failed to connect to backend");
    }
   });
  </script>
 </body>
</html>
